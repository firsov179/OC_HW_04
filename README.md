# Задание № 4 «Сетевые взаимодействия с применением транспортного протокола UDP»
## Фирсов Федор БПИ219.

## Условие задачи:

Задача 15. O клумбе – 1. На клумбе растет 40 цветов, за ними непрерывно следят два процесса–садовника
и поливают увядшие цветы, при этом оба садовника очень боятся полить один и тот же цветок,
который еще не начал вянуть. <br/>
Создать приложение, моделирующее состояния цветков на клумбе и действия садовников.
Для изменения состояния цветов создать отдельный процесс (а не 40 процессов для каждого цветка),
который может задавать одновременное начало увядания для нескольких цветков.

*  На момент начала моделирования все цветы политы.
*  Каждое утро каждый политый цветок с вероятностью 1/2 начинают увядать.
*  Во избежание траура будем считать, что увядший цветок просто некрасивый и никогда не умрет
*  Днем два Садовника Alice и Bob просыпаются и идут слева направо вдоль клумбы и поливают увядшие цветы.
*  У садовником могут быть лейки разных размеров (задается как параметр) стандартно у Alice для 5-ти цветов, а у BOb-a только 4. 
*  Если цветок поливается одним садовникам, то другой не будет его поливать благодаря pthread семафору.
*  Садовники не стареют, а цветы никогда не умрут - процесс может длиться вечность)

##  Запуск и тестирование:
По сравнению с ИДЗ-3 тут ничего не поменялось
Для простоты запуска в каждой папке есть Make файл и Bash скрип. 

Скрипт компилирует и запускает всех клиентов и сервер с перенаправлением вывода в файл.

При запуске Bash скрипта процесс начинается автоматически, но для появления выходных файлов необходимо его прервать. (CTRL + C)

В папке sample лежат примеры работы

##  Решение:

В этот раз я начал делать с конца)

###  8:

1. [Код клиента-клумбы](https://github.com/fodof91/OC_HW_04/blob/master/8/client_flowerbed.c)
2. [Код клиента-садовника](https://github.com/fodof91/OC_HW_04/blob/master/8/client_gardener.c)
3. [Код клиента-принтера](https://github.com/fodof91/OC_HW_04/blob/master/8/client_printer.c)
3. [Код сервера](https://github.com/fodof91/OC_HW_04/blob/master/8/server.c)
4. [Код скрипта запуска](https://github.com/fodof91/OC_HW_04/blob/master/8/run.sh)
5. [Код Makefile](https://github.com/fodof91/OC_HW_04/blob/master/8/Makefile)

Все соединения между клиентом и серверами - UDP. Для различия сервером первая буква запроса - тип.
1) A/B - запрос полива цветов от Алисы или Боба соответственно.
2) N - Запрос "начало нового дня", те обновление информации у садовников о завядших цветах.
3) F - Запрос от цветника, те обновление информации о завядших цветах на сервере.

Есть возможность для подключения до 10 "принтеров" выводящих все сообщения в одной консоли.

###  6-7:

1. [Код клиента-клумбы](https://github.com/fodof91/OC_HW_04/blob/master/6-7/client_flowerbed.c)
2. [Код клиента-садовника](https://github.com/fodof91/OC_HW_04/blob/master/6-7/client_gardener.c)
3. [Код клиента-принтера](https://github.com/fodof91/OC_HW_04/blob/master/6-7/client_printer.c)
3. [Код сервера](https://github.com/fodof91/OC_HW_04/blob/master/6-7/server.c)
4. [Код скрипта запуска](https://github.com/fodof91/OC_HW_04/blob/master/6-7/run.sh)
5. [Код Makefile](https://github.com/fodof91/OC_HW_04/blob/master/4-5/Makefile)

Для добавления только 1 принтера меняем константу количества на 1.

###  4-5:

1. [Код клиента-клумбы](https://github.com/fodof91/OC_HW_04/blob/master/4-5/client_flowerbed.c)
2. [Код клиента садовника](https://github.com/fodof91/OC_HW_04/blob/master/4-5/client_gardener.c)
3. [Код сервера](https://github.com/fodof91/OC_HW_04/blob/master/4-5/server.c)
4. [Код скрипта запуска](https://github.com/fodof91/OC_HW_04/blob/master/4-5/run.sh)
5. [Код Makefile](https://github.com/fodof91/OC_HW_04/blob/master/4-5/Makefile)

Меняем константу на 0))

##  Скрины запуска:
![9](https://github.com/fodof91/OC_HW_04/blob/main/sample/1.png) 
![9](https://github.com/fodof91/OC_HW_04/blob/main/sample/2.png) 
![9](https://github.com/fodof91/OC_HW_04/blob/main/sample/2.png) 

[В виде файла](https://github.com/fodof91/OC_HW_04/blob/master/sample)
